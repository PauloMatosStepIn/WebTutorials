<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="../css/code.css" />
    <link rel="stylesheet" href="../css/SiteHeader.css" />
    <link rel="stylesheet" href="../css/main.css" />

    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,400;0,800;0,900;1,400&display=swap" rel="stylesheet" />

    <title>Web Tutorials - Google Chart API - Maps</title>
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {
        packages: ["geochart"],
        // Note: Because this chart requires geocoding, you'll need a mapsApiKey.
        // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
        mapsApiKey: "AIzaSyAnhkSf9cpu9IzqN57Z0-uE_cQ_G4cKfGI",
      });
      google.charts.setOnLoadCallback(drawMarkersMap);

      function drawMarkersMap() {
        var data = google.visualization.arrayToDataTable([
          ["cidade", "clube"],
          ["Lisboa Benfica", "SLB"],
          ["Lisboa Alvalade", "SCP"],
          ["Porto", "CFP"],
          ["Paços de Ferreira", "CAP"],
          ["Felgueiras", "FOCA"],
          ["Guimarães", "VSC"],
          ["Coimbra", "CNAC"],
          ["Cascais", "CWP"],
        ]);

        var options = {
          region: "PT",
          displayMode: "markers",
        };

        var chart = new google.visualization.GeoChart(document.getElementById("chart_div"));
        chart.draw(data, options);

        //interactividade
        google.visualization.events.addListener(chart, "select", () => {
          var item = chart.getSelection()[0];
          console.log(item);
          if (item) {
            var nome = data.getValue(item.row, 1);
            switch (nome) {
              case "SLB":
                window.open(`https://www.slbenfica.pt/pt-pt/modalidades/polo_aquatico/plantel-feminino`);
                break;
              case "SCP":
                window.open(`https://www.sporting.pt/pt/tax_noticias/modalidades/polo-aquatico`);
                break;
              case "CWP":
                window.open(`https://www.cascais.pt/contactos/cascais-water-polo-club`);
                break;
              case "CFP":
                window.open(`https://fluvial.pt/modalidades/polo-aquatico/`);
                break;
              case "CAP":
                window.open(`https://www.facebook.com/capacense`);
                break;
              case "FOCA":
                window.open(`https://www.facebook.com/focacnfpa/`);
                break;
              case "VSC":
                window.open(`https://vitoriasc.pt/en/polo-aquatico/`);
                break;
              case "CNAC":
                window.open(`https://s4.cnaconline.com/`);
                break;
              default:
                break;
            }
          }
        });
      }

      addEventListener("resize", (event) => {});
      onresize = (event) => {
        drawMarkersMap();
      };
    </script>
  </head>
  <body style="font-family: Nunito">
    <div class="container">
      <SiteHeader>
        <a style="padding-top: 20px; text-decoration: none" href="../index.html#GeoCharts">
          <div class="DivLink">Return to Web Tutorials</div>
        </a>
      </SiteHeader>

      <h1>Google Geo Chart API</h1>
      <p>Para que este código funcione no seu website tem de criar uma "Google Map Api Key" e utilizá-la como o valor do parâmetro "mapsApiKey" ao carregar o gráfico.</p>
      <h4>Clubes de Polo Aquático em Portugal</h4>
      <p>Clique para ir para o Site do Clube</p>
      <div style="padding-top: 0px" id="chart_div" style="width: 600px; height: 600px"></div>

      <div class="code">
        <div>HEADERS</div>
        <pre>
        &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"&gt;&lt;/script&gt;
        &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" /&gt;
        &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"&gt;&lt;/script&gt;

        &lt;script src="https://www.gstatic.com/charts/loader.js"&gt;&lt;
        &lt;
          &lt;/script&gt;
      </pre
        >
      </div>

      <div class="code">
        <div>JAVASCRIPT</div>
        <pre>
      &lt;script&gt;
        google.charts.load("current", {
          packages: ["geochart"],
          // Note: Because this chart requires geocoding, you'll need a mapsApiKey.
          // See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
          mapsApiKey: "AIzaSyAnhkSf9cpu9IzqN57Z0-uE_cQ_G4cKfGI",
        });
        google.charts.setOnLoadCallback(drawMarkersMap);
  
        function drawMarkersMap() {
          var data = google.visualization.arrayToDataTable([
            ["cidade", 'clube'],
            ["Lisboa Benfica", 'SLB'],
            ["Lisboa Alvalade",'SCP'],
            ["Porto", 'CFP'],
            ["Paços de Ferreira", 'CAP'],
            ["Felgueiras", 'FOCA'],
            ["Guimarães", "VSC"],
            ["Coimbra", "CNAC"],
            ["Cascais", "CWP"],
          ]);
  
          var options = {
            region: "PT",
            displayMode: "markers"
          };
  
          var chart = new google.visualization.GeoChart(document.getElementById("chart_div"));
          chart.draw(data, options);
  
          //interactividade
          google.visualization.events.addListener(chart, "select", () => {
            var item = chart.getSelection()[0];
            console.log(item);
            if (item) {
              var nome = data.getValue(item.row, 1);
              switch (nome){
                case 'SLB':
                  window.open(`https://www.slbenfica.pt/pt-pt/modalidades/polo_aquatico/plantel-feminino`);
                  break;
                case 'SCP':
                  window.open(`https://www.sporting.pt/pt/tax_noticias/modalidades/polo-aquatico`);
                  break;
                case 'CWP':
                  window.open(`https://www.cascais.pt/contactos/cascais-water-polo-club`);
                  break;
                case 'CFP':
                  window.open(`https://fluvial.pt/modalidades/polo-aquatico/`);
                  break;
                case 'CAP':
                  window.open(`https://www.facebook.com/capacense`);
                  break;
                case 'FOCA':
                  window.open(`https://www.facebook.com/focacnfpa/`);
                  break;
                case 'VSC':
                  window.open(`https://vitoriasc.pt/en/polo-aquatico/`);
                  break;
                case 'CNAC':
                  window.open(`https://s4.cnaconline.com/`);
                  break;                
                default:  
                  break;
              }
            }
          });
        }

        addEventListener('resize', (event) => {});
        onresize = (event) => { drawMarkersMap() };
      
      &lt;/script&gt;
      </pre
        >
      </div>
      <div class="code">
        <div>HTML</div>
        <pre>
        &lt;div class="container"&gt;
          &lt;h4&gt;Clubes de Polo Aquático em Portugal&lt;/h4&gt;
          &lt;p&gt;Clique para ir para o Site do Clube&lt;/p&gt;
          &lt;div style="padding-top:0px;" id="chart_div" style="width: 600px; height: 600px;"&gt;&lt;/div&gt;
        &lt;/div&gt;
      </pre
        >
      </div>

      <a href="https://developers.google.com/chart/interactive/docs/gallery/geochart">Google Geo Chart Docs.</a>
      <hr />
      <div style="padding: 50px">
        <p>Código completo disponível no GitHub:</p>
        <a href="https://github.com/PauloMatosStepIn/WebTutorials" class="ext"> github.com : WebTutorials </a>
      </div>
    </div>
  </body>
</html>
